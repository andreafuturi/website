<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Andrea Futuri</title>
    <meta name="description" content="Future is here" />

    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Andrea Futuri" />
    <meta property="og:description" content="Future is here" />
    <meta property="og:url" content="https://andreafuturi.com" />

    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'" />

    <!-- Styles -->
    <style>
      :root {
        --blue: hsl(195.6deg, 100%, 50%);
        --blue2: hsl(225.6deg, 100%, 50%);
        --gold: hsl(45.6deg, 100%, 50%);
        --gold2: hsl(15.6deg, 100%, 50%);
      }

      /* Base styles */
      html,
      body,
      #app {
        height: 100%;
        background-color: black;
        margin: 0;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow: hidden;
      }

      /* SVG styling */
      svg {
        overflow: visible;
        fill: var(--blue);
      }
      @media screen and (hover: hover) {
        .lighted {
          filter: url(#HighRelief);
        }
      }
      @media screen and (pointer: coarse) {
        .lighted {
          filter: none;
        }
        .lighted rect {
          fill: "#323232";
        }
        html,
        body {
          background-color: "#323232";
        }
      }
      filter {
        color-interpolation-filters: sRGB;
      }
      /* Overlay screen styling */
      #blackScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: Arial, sans-serif;
        font-size: 16px;
        text-align: center;
        overflow-y: scroll;
      }

      /* Button styling */
      #loadingButton {
        position: relative;
        margin: 40px 0 15px;
        padding: 10px 20px;
        color: white;
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: 12px;
        cursor: not-allowed;
        overflow: hidden;
        user-select: none;
        font-size: 18px;
      }

      /* Loading animation */
      #loadingButton::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, #070707, #00bdff, #0182ff);
        animation: rotateBackground 8s linear infinite;
      }

      #loadingButton::after {
        content: "";
        position: absolute;
        top: 1px;
        left: 1px;
        width: calc(100% - 2px);
        height: calc(100% - 2px);
        border-radius: 12px;
        background-color: #131219;
      }

      @keyframes rotateBackground {
        100% {
          transform: rotate(1turn);
        }
      }

      button:disabled {
        opacity: 0.5;
      }

      /* Text container styling */
      #contextText {
        max-width: 600px;
        padding: 20px;
      }
      #contextText h2 {
        font-size: 50px;
        margin-bottom: 30px;
      }
      #contextText p {
        font-size: 16px;
        margin-bottom: 10px;
      }

      /* Animation for background fade */
      @keyframes backgroundFade {
        from {
          background-color: black;
        }
        to {
          background-color: rgba(0, 0, 0, 0.65);
        }
      }

      .fade-background {
        animation: backgroundFade 2s ease forwards;
      }

      /* Logo responsiveness */
      .loadinglogo {
        height: 7vh;
        margin-bottom: 40px;
      }
      .footer {
        font-size: 12px;
        font-weight: 200;
        padding: 20px;
        max-width: 340px;
        margin: auto;
      }
    </style>

    <!-- Favicon -->
    <link rel="icon" href="/favicon.png" type="image/png" />

    <!-- Main Script -->
    <script type="module" src="./andreafuturi.com.js" crossorigin></script>
  </head>

  <body>
    <div id="app"></div>
    <div id="blackScreen">
      <div id="contextText">
        <!-- Logo -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="46.21 0 98.67 82.61" class="loadinglogo">
          <path
            d="M83.0383 35.1653L89.3858 43.9514H102.081L89.3858 26.3709L95.7332 17.5847L114.776 43.9556H127.471L95.7332 0L64 43.9514H76.6949L83.0383 35.1653Z"
            fill="white"></path>
          <path
            d="M56.0062 75.3784H49.1178V82H46.2072V64.8275H57.4372V67.3743H49.1178V73.0499H56.0062V75.3784ZM74.2409 74.9418V64.8275H77.1757V74.9903C77.1757 79.429 74.1439 82.6064 69.8993 82.6064C65.6304 82.6064 62.5986 79.429 62.5986 74.9903V64.8275H65.5334V74.9418C65.5334 77.6099 67.2312 80.0596 69.8993 80.0839C72.4946 80.0839 74.2409 77.9009 74.2409 74.9418ZM87.3988 82V67.3258H81.8929V64.8275H95.791V67.3258H90.3094V82H87.3988ZM112.17 74.9418V64.8275H115.105V74.9903C115.105 79.429 112.073 82.6064 107.829 82.6064C103.56 82.6064 100.528 79.429 100.528 74.9903V64.8275H103.463V74.9418C103.463 77.6099 105.161 80.0596 107.829 80.0839C110.424 80.0839 112.17 77.9009 112.17 74.9418ZM129.136 67.2288H124.479V73.4623H129.136C131.368 73.4623 133.017 72.1768 133.017 70.4062C133.017 68.393 131.392 67.2288 129.136 67.2288ZM124.479 75.7908V82H121.569V64.8275H129.476C133.235 64.8275 135.928 67.1318 135.928 70.4062C135.928 72.7104 134.254 74.7478 131.926 75.3542L136.219 82H132.872L129.088 75.7908H124.479ZM141.967 64.8275H144.877V82H141.967V64.8275Z"
            fill="white"></path>
        </svg>

        <h2>Welcome</h2>
        <p>1. The pattern you will see is code-generated following special math equations.</p>
        <p>2. Move the light with your mouse (use Chrome for best performance).</p>
        <p>3. Scroll to adjust light intensity.</p>
        <p>4. Click a logo to change its color.</p>

        <button id="loadingButton" disabled>
          <span style="position: relative; z-index: 1">Loading...</span>
        </button>
        <p class="footer">Made with DenoJS, React, React Spring, and a custom SVG animation library.</p>
      </div>
    </div>

    <!-- Inline Script for Page Behavior -->
    <script>
      function initializeUI() {
        const blackScreen = document.getElementById("blackScreen");
        const loadingButton = document.getElementById("loadingButton");

        function animateBackground() {
          if (blackScreen) {
            blackScreen.classList.add("fade-background");
          }
        }

        function hideBlackScreen() {
          if (blackScreen) {
            blackScreen.style.display = "none";
            const currentPath = window.location.pathname;
            history.pushState(null, null, `#`);
          }
        }

        if (loadingButton) {
          const buttonText = loadingButton.querySelector("span");
          if (buttonText) {
            buttonText.textContent = "Continue";
          }
          loadingButton.disabled = false;
          loadingButton.style.cursor = "pointer";
          loadingButton.addEventListener("click", hideBlackScreen);
        }

        setTimeout(animateBackground, 2000);

        // Check if a module script exists and add an error handler if so
        const moduleScript = document.querySelector('script[type="module"]');
        if (moduleScript) {
          moduleScript.onerror = hideBlackScreen;
        }

        // Only add popstate event if blackScreen exists
        window.addEventListener("popstate", () => {
          if (blackScreen) {
            blackScreen.style.display = "flex";
          }
        });
      }
      window.addEventListener("DOMContentLoaded", initializeUI);
    </script>
  </body>
</html>
